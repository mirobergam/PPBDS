<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Chapter 11 Discrete Response | We R Who We R: Preceptor’s Primer for Bayesian Data Science" />
<meta property="og:type" content="book" />



<meta name="github-repo" content="davidkane9/PPBDS" />

<meta name="author" content="David Kane" />

<meta name="date" content="2020-07-28" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>

<meta name="description" content="Chapter 11 Discrete Response | We R Who We R: Preceptor’s Primer for Bayesian Data Science">

<title>Chapter 11 Discrete Response | We R Who We R: Preceptor’s Primer for Bayesian Data Science</title>

<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/envisioned.css" rel="stylesheet" />
<link href="libs/msmb-css-0/msmb.css" rel="stylesheet" />
<script>
function toggle_visibility(id1, id2) {
var e = document.getElementById(id1);
var f = document.getElementById(id2);

e.style.display = ((e.style.display!='none') ? 'none' : 'block');

if(f.classList.contains('fa-plus-square')) {
    f.classList.add('fa-minus-square')
    f.classList.remove('fa-plus-square')
} else {
    f.classList.add('fa-plus-square')
    f.classList.remove('fa-minus-square')
}

}
</script>
<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }

code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body>



<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul class="navbar">
<li class="msmb"><p class="title">We R Who We R: Preceptor's Primer for Bayesian Data Science<p><p class="author">David Kane</p>
<li class="dropdown" style="float:right">
<a href="javascript:void(0)" class="dropbtn">&#x25BE; Chapters</a>
<div class="dropdown-content">
<a href="index.html">Cover</a>
<a href="preamble.html">Preamble</a>
<a href="shopping-week.html">Shopping Week</a>
<a href="visualization.html"><span class="toc-section-number">1</span> Visualization</a>
<a href="tidyverse.html"><span class="toc-section-number">2</span> Tidyverse</a>
<a href="rubin-causal-model.html"><span class="toc-section-number">3</span> Rubin Causal Model</a>
<a href="functions.html"><span class="toc-section-number">4</span> Functions</a>
<a href="probability.html"><span class="toc-section-number">5</span> Probability</a>
<a href="sampling.html"><span class="toc-section-number">6</span> Sampling</a>
<a href="one-parameter.html"><span class="toc-section-number">7</span> One Parameter</a>
<a href="two-parameters.html"><span class="toc-section-number">8</span> Two Parameters</a>
<a href="n-parameters.html"><span class="toc-section-number">9</span> N Parameters</a>
<a href="continuous-response.html"><span class="toc-section-number">10</span> Continuous Response</a>
<a id="active-page" href="discrete-response.html"><span class="toc-section-number">11</span> Discrete Response</a><ul class="toc-sections">
<li class="toc"><a href="#exploratory-data-analysis-eda"> Exploratory Data Analysis (EDA)</a></li>
<li class="toc"><a href="#logistic-regression"> Logistic regression</a></li>
<li class="toc"><a href="#classification-and-regression-trees-cart"> Classification and regression trees (CART)</a></li>
</ul>
<a href="appendices.html">Appendices</a>
<a href="tools.html">Tools</a>
<a href="simpsons-paradox.html">Simpson’s Paradox</a>
<a href="m-and-s-errors.html">M and S Errors</a>
<a href="shiny.html">Shiny</a>
<a href="maps.html">Maps</a>
<a href="animation.html">Animation</a>
<a href="references-1.html">References</a>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div id="discrete-response" class="section level1">
<h1>
<span class="header-section-number">Chapter 11</span> Discrete Response</h1>
<p><strong>Binary responses</strong> take on only two values: success (<span class="math inline">\(Y=1\)</span>) or failure (<span class="math inline">\(Y=0\)</span>), yes (<span class="math inline">\(Y=1\)</span>) or no (<span class="math inline">\(Y=0\)</span>), et cetera. Binary responses are one of the most common types of data that statisticians encounter. We are often interested in modeling the probability of success, <span class="math inline">\(p\)</span>, based on a set of covariates. As with regression, there are two broad categories of problems: <em>modeling for prediction</em> and <em>modeling for causation</em>. Although terminology varies across fields, “regression” is generally used for situations in which our <em>dependent variable</em> is continuous, as in Chapter <a href="continuous-response.html#continuous-response">10</a>. “Classification” applies to cases in which the dependent variable takes on discrete values, the simplest of which is the binary case.</p>
<p>In this chapter, we will look at three common techniques of <strong>classification</strong> of binary data. First, we will consider logistic regression, which is similar conceptually to the linear regression models we considered in Chapters <a href="#pitfalls"><strong>??</strong></a> and <a href="continuous-response.html#continuous-response">10</a>. Second, we will consider classification and regression trees (CART). Third, we will discuss random forests. We use the <strong>tidymodels</strong> tools for all examples.</p>
<!-- DK: Need to end with precise question. -->
<div id="exploratory-data-analysis-eda" class="section level2">
<h2>
<span class="header-section-number">11.1</span> Exploratory Data Analysis (EDA)</h2>
<p>Begin with our usual libraries:</p>
<div class="sourceCode" id="cb893"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb893-1"><a href="discrete-response.html#cb893-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb893-2"><a href="discrete-response.html#cb893-2"></a><span class="kw">library</span>(broom)</span>
<span id="cb893-3"><a href="discrete-response.html#cb893-3"></a><span class="kw">library</span>(skimr)</span>
<span id="cb893-4"><a href="discrete-response.html#cb893-4"></a><span class="kw">library</span>(PPBDS.data)</span></code></pre></div>
<p>Before we start modeling, let’s perform some exploratory analysis on the dataset we’ll be working with, cces. Cces stands for the Cooperative Congressional Election Study, a study regarding the approval rating of individual voters to their sitting president. Each row captures one voter, some of their demographic information, and how highly they approve (or disaprprove) of the president. We will tweak the data by only looking at observations recorded in the year 2018 so that all the responses are about the same president.</p>
<div class="sourceCode" id="cb894"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb894-1"><a href="discrete-response.html#cb894-1"></a>cces_ch12 &lt;-<span class="st"> </span>cces <span class="op">%&gt;%</span></span>
<span id="cb894-2"><a href="discrete-response.html#cb894-2"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2018</span>)</span></code></pre></div>
<p>Let’s first look at the raw data values by either looking at <code>cces_ch12</code> using RStudio’s spreadsheet viewer or by using the <code>glimpse()</code> function from the <strong>dplyr</strong> package:</p>
<div class="sourceCode" id="cb895"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb895-1"><a href="discrete-response.html#cb895-1"></a><span class="kw">glimpse</span>(cces_ch12)</span></code></pre></div>
<pre><code>## Rows: 60,000
## Columns: 12
## $ year        &lt;int&gt; 2018, 2018, 2018, 2018, 2018, 2018, 2018, 2018, 2018, 201…
## $ state       &lt;chr&gt; "Texas", "Ohio", "Kentucky", "Arizona", "Pennsylvania", "…
## $ gender      &lt;chr&gt; "Female", "Female", "Female", "Female", "Female", "Male",…
## $ age         &lt;int&gt; 45, 58, 66, 88, 59, 71, 86, 80, 45, 60, 55, 66, 85, 51, 6…
## $ race        &lt;chr&gt; "Black", "White", "White", "White", "White", "White", "Wh…
## $ marstat     &lt;chr&gt; "Separated", "Married", "Divorced", "Widowed", "Divorced"…
## $ ideology    &lt;fct&gt; Not Sure, Conservative, Liberal, Moderate, Liberal, Very …
## $ education   &lt;fct&gt; Some College, Post-Grad, Post-Grad, High School Graduate,…
## $ news        &lt;chr&gt; "Don't Know", "Only Now And Then", "Most Of The Time", "S…
## $ econ        &lt;chr&gt; "Gotten Much Worse", "Stayed About The Same", "Stayed Abo…
## $ approval_ch &lt;chr&gt; "Disapprove / Somewhat Disapprove", "Approve / Somewhat A…
## $ approval    &lt;dbl&gt; 2, 4, 1, 4, 2, 5, 5, 4, 5, 1, 5, 1, 5, 1, 1, 4, 1, 5, 1, …</code></pre>
<p>From this, we can gather that there are 16 variables. Notably, there are 60,000 observations even after filtering only for the year 2018.</p>
<p>Let’s also display a random sample of 5 rows of the 60,000 rows. We will be displaying these 5 random observations using a gt() table. Before that, though, we will select the variables that are currently of interest to us.</p>
<div class="sourceCode" id="cb897"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb897-1"><a href="discrete-response.html#cb897-1"></a>cces_ch12 &lt;-<span class="st"> </span>cces_ch12 <span class="op">%&gt;%</span></span>
<span id="cb897-2"><a href="discrete-response.html#cb897-2"></a><span class="st">  </span><span class="kw">select</span>(state, age, gender, race, education, ideology, approval)</span>
<span id="cb897-3"><a href="discrete-response.html#cb897-3"></a></span>
<span id="cb897-4"><a href="discrete-response.html#cb897-4"></a>cces_ch12 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb897-5"><a href="discrete-response.html#cb897-5"></a><span class="st">  </span><span class="kw">sample_n</span>(<span class="dt">size =</span> <span class="dv">5</span>)</span></code></pre></div>
<div class="sourceCode" id="cb898"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb898-1"><a href="discrete-response.html#cb898-1"></a>cces_ch12 <span class="op">%&gt;%</span></span>
<span id="cb898-2"><a href="discrete-response.html#cb898-2"></a><span class="st">  </span><span class="kw">sample_n</span>(<span class="dv">5</span>) <span class="op">%&gt;%</span></span>
<span id="cb898-3"><a href="discrete-response.html#cb898-3"></a><span class="st">  </span><span class="kw">gt</span>() <span class="op">%&gt;%</span></span>
<span id="cb898-4"><a href="discrete-response.html#cb898-4"></a><span class="st">  </span><span class="kw">cols_label</span>(</span>
<span id="cb898-5"><a href="discrete-response.html#cb898-5"></a>    <span class="dt">state =</span> <span class="kw">md</span>(<span class="st">"State"</span>),</span>
<span id="cb898-6"><a href="discrete-response.html#cb898-6"></a>    <span class="dt">age =</span> <span class="kw">md</span>(<span class="st">"Age"</span>),</span>
<span id="cb898-7"><a href="discrete-response.html#cb898-7"></a>    <span class="dt">gender =</span> <span class="kw">md</span>(<span class="st">"Gender"</span>),</span>
<span id="cb898-8"><a href="discrete-response.html#cb898-8"></a>    <span class="dt">race =</span> <span class="kw">md</span>(<span class="st">"Race"</span>),</span>
<span id="cb898-9"><a href="discrete-response.html#cb898-9"></a>    <span class="dt">education =</span> <span class="kw">md</span>(<span class="st">"Education"</span>),</span>
<span id="cb898-10"><a href="discrete-response.html#cb898-10"></a>    <span class="dt">ideology =</span> <span class="kw">md</span>(<span class="st">"Ideology"</span>),</span>
<span id="cb898-11"><a href="discrete-response.html#cb898-11"></a>    <span class="dt">approval =</span> <span class="kw">md</span>(<span class="st">"Approval of President"</span>)) <span class="op">%&gt;%</span></span>
<span id="cb898-12"><a href="discrete-response.html#cb898-12"></a><span class="st">  </span><span class="kw">tab_source_note</span>(<span class="kw">md</span>(<span class="st">"A random sample of 5 out of the 60,000 voters"</span>))</span></code></pre></div>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#fqigwsvrzp .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fqigwsvrzp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fqigwsvrzp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fqigwsvrzp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fqigwsvrzp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fqigwsvrzp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fqigwsvrzp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fqigwsvrzp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fqigwsvrzp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fqigwsvrzp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fqigwsvrzp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fqigwsvrzp .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#fqigwsvrzp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#fqigwsvrzp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fqigwsvrzp .gt_from_md > :first-child {
  margin-top: 0;
}

#fqigwsvrzp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fqigwsvrzp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fqigwsvrzp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#fqigwsvrzp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fqigwsvrzp .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#fqigwsvrzp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fqigwsvrzp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fqigwsvrzp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fqigwsvrzp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fqigwsvrzp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#fqigwsvrzp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fqigwsvrzp .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#fqigwsvrzp .gt_left {
  text-align: left;
}

#fqigwsvrzp .gt_center {
  text-align: center;
}

#fqigwsvrzp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fqigwsvrzp .gt_font_normal {
  font-weight: normal;
}

#fqigwsvrzp .gt_font_bold {
  font-weight: bold;
}

#fqigwsvrzp .gt_font_italic {
  font-style: italic;
}

#fqigwsvrzp .gt_super {
  font-size: 65%;
}

#fqigwsvrzp .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="fqigwsvrzp" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">year</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">State</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Gender</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Age</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Race</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">marstat</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Ideology</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Education</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">news</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">econ</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">approval_ch</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Approval of President</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_center">2018</td>
      <td class="gt_row gt_left">Georgia</td>
      <td class="gt_row gt_left">Female</td>
      <td class="gt_row gt_center">24</td>
      <td class="gt_row gt_left">Hispanic</td>
      <td class="gt_row gt_left">Single / Never Married</td>
      <td class="gt_row gt_center">Conservative</td>
      <td class="gt_row gt_center">4-Year</td>
      <td class="gt_row gt_left">Some Of The Time</td>
      <td class="gt_row gt_left">Gotten Worse / Somewhat Worse</td>
      <td class="gt_row gt_left">Strongly Disapprove</td>
      <td class="gt_row gt_right">1</td>
    </tr>
<tr>
<td class="gt_row gt_center">2018</td>
      <td class="gt_row gt_left">North Carolina</td>
      <td class="gt_row gt_left">Female</td>
      <td class="gt_row gt_center">61</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_left">Divorced</td>
      <td class="gt_row gt_center">Conservative</td>
      <td class="gt_row gt_center">Post-Grad</td>
      <td class="gt_row gt_left">Most Of The Time</td>
      <td class="gt_row gt_left">Gotten Much Better</td>
      <td class="gt_row gt_left">Strongly Approve</td>
      <td class="gt_row gt_right">5</td>
    </tr>
<tr>
<td class="gt_row gt_center">2018</td>
      <td class="gt_row gt_left">Texas</td>
      <td class="gt_row gt_left">Female</td>
      <td class="gt_row gt_center">25</td>
      <td class="gt_row gt_left">Mixed</td>
      <td class="gt_row gt_left">Single / Never Married</td>
      <td class="gt_row gt_center">Very Liberal</td>
      <td class="gt_row gt_center">Some College</td>
      <td class="gt_row gt_left">Most Of The Time</td>
      <td class="gt_row gt_left">Stayed About The Same</td>
      <td class="gt_row gt_left">Strongly Disapprove</td>
      <td class="gt_row gt_right">1</td>
    </tr>
<tr>
<td class="gt_row gt_center">2018</td>
      <td class="gt_row gt_left">Texas</td>
      <td class="gt_row gt_left">Female</td>
      <td class="gt_row gt_center">83</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_left">Widowed</td>
      <td class="gt_row gt_center">Very Conservative</td>
      <td class="gt_row gt_center">High School Graduate</td>
      <td class="gt_row gt_left">Most Of The Time</td>
      <td class="gt_row gt_left">Gotten Much Better</td>
      <td class="gt_row gt_left">Strongly Approve</td>
      <td class="gt_row gt_right">5</td>
    </tr>
<tr>
<td class="gt_row gt_center">2018</td>
      <td class="gt_row gt_left">Indiana</td>
      <td class="gt_row gt_left">Female</td>
      <td class="gt_row gt_center">74</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_left">Married</td>
      <td class="gt_row gt_center">Conservative</td>
      <td class="gt_row gt_center">High School Graduate</td>
      <td class="gt_row gt_left">Some Of The Time</td>
      <td class="gt_row gt_left">Stayed About The Same</td>
      <td class="gt_row gt_left">Approve / Somewhat Approve</td>
      <td class="gt_row gt_right">4</td>
    </tr>
</tbody>
<tfoot class="gt_sourcenotes"><tr>
<td class="gt_sourcenote" colspan="12">A random sample of 5 out of the 60,000 voters</td>
    </tr></tfoot>
</table></div>
<p>Now that we’ve looked at the raw values in <code>cces_ch12</code> and have a sense of the data, let’s compute summary statistics. Let’s use the <code>skim()</code> function from the <code>skimr</code> package.</p>
<div class="sourceCode" id="cb899"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb899-1"><a href="discrete-response.html#cb899-1"></a>cces_ch12 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb899-2"><a href="discrete-response.html#cb899-2"></a><span class="st">  </span><span class="kw">skim</span>()</span></code></pre></div>
<table style="width: auto;" class="table table-condensed">
<caption>
<span id="tab:unnamed-chunk-706">TABLE 11.1: </span>Data summary
</caption>
<thead><tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
Piped data
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
60000
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
character
</td>
<td style="text-align:left;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
factor
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead><tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
min
</th>
<th style="text-align:right;">
max
</th>
<th style="text-align:right;">
empty
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:right;">
whitespace
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
state
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
51
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
gender
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
race
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
marstat
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
news
</td>
<td style="text-align:right;">
385
</td>
<td style="text-align:right;">
0.99
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
econ
</td>
<td style="text-align:right;">
82
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
approval_ch
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table>
<thead><tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:left;">
ordered
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:left;">
top_counts
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
ideology
</td>
<td style="text-align:right;">
419
</td>
<td style="text-align:right;">
0.99
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
Mod: 17302, Con: 12052, Lib: 10929, Ver: 7434
</td>
</tr>
<tr>
<td style="text-align:left;">
education
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
Hig: 16617, 4-Y: 14256, Som: 12631, Pos: 8316
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead><tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p25
</th>
<th style="text-align:right;">
p50
</th>
<th style="text-align:right;">
p75
</th>
<th style="text-align:right;">
p100
</th>
<th style="text-align:left;">
hist
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
year
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2018.0
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
2018
</td>
<td style="text-align:right;">
2018
</td>
<td style="text-align:right;">
2018
</td>
<td style="text-align:right;">
2018
</td>
<td style="text-align:right;">
2018
</td>
<td style="text-align:left;">
▁▁▇▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
age
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
48.1
</td>
<td style="text-align:right;">
17.8
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
48
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
95
</td>
<td style="text-align:left;">
▇▇▇▅▁
</td>
</tr>
<tr>
<td style="text-align:left;">
approval
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2.6
</td>
<td style="text-align:right;">
1.7
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
▇▂▁▂▅
</td>
</tr>
</tbody>
</table>
<p>You’ll notice that we are missing data for our ideology and approval variables. The <code>complete_rate</code> column tells us that approval has 3% missing observations and ideology has 0.7% missing observations.</p>
<p>To complete our exploratory data analysis, let’s create some data visualizations.</p>
<p>The primary response variable left in our dataset is <code>approval</code>, a numeric variable from 1-5 with 5 representing the highest approval of the president. So, let’s start by looking at the overall distribution of <code>approval</code>.</p>
<div class="sourceCode" id="cb900"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb900-1"><a href="discrete-response.html#cb900-1"></a>cces_ch12 <span class="op">%&gt;%</span></span>
<span id="cb900-2"><a href="discrete-response.html#cb900-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(approval) <span class="op">==</span><span class="st"> </span><span class="ot">FALSE</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#Removing NA observations</span></span>
<span id="cb900-3"><a href="discrete-response.html#cb900-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> approval)) <span class="op">+</span></span>
<span id="cb900-4"><a href="discrete-response.html#cb900-4"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">fill =</span> <span class="st">"red"</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb900-5"><a href="discrete-response.html#cb900-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">"Count"</span>,</span>
<span id="cb900-6"><a href="discrete-response.html#cb900-6"></a>       <span class="dt">x =</span> <span class="st">"Presidential Approval"</span>,</span>
<span id="cb900-7"><a href="discrete-response.html#cb900-7"></a>       <span class="dt">title =</span> <span class="st">"Presidential Approval in 2018"</span>) </span></code></pre></div>
<p><img src="book_temp_files/figure-html/unnamed-chunk-707-1.png" width="672"></p>
<p>According to this graph, the approval of the president in 2018 is very polarized: the peaks are at 1 and 5 and no one reported with a neutral 3. There seems to be more disapproval overall.
To make things more interesting, let’s facet this approval variable by gender and then race.</p>
<div class="sourceCode" id="cb901"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb901-1"><a href="discrete-response.html#cb901-1"></a>cces_ch12 <span class="op">%&gt;%</span></span>
<span id="cb901-2"><a href="discrete-response.html#cb901-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(approval) <span class="op">==</span><span class="st"> </span><span class="ot">FALSE</span>) <span class="op">%&gt;%</span></span>
<span id="cb901-3"><a href="discrete-response.html#cb901-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> approval, <span class="dt">fill =</span> gender)) <span class="op">+</span></span>
<span id="cb901-4"><a href="discrete-response.html#cb901-4"></a><span class="st">  </span><span class="kw">geom_bar</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb901-5"><a href="discrete-response.html#cb901-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">"Count"</span>,</span>
<span id="cb901-6"><a href="discrete-response.html#cb901-6"></a>       <span class="dt">x =</span> <span class="st">"Presidential Approval"</span>,</span>
<span id="cb901-7"><a href="discrete-response.html#cb901-7"></a>       <span class="dt">title =</span> <span class="st">"Presidential Approval in 2018 by Gender"</span>) <span class="op">+</span></span>
<span id="cb901-8"><a href="discrete-response.html#cb901-8"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>gender) <span class="op">+</span><span class="st"> </span></span>
<span id="cb901-9"><a href="discrete-response.html#cb901-9"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">"none"</span>)</span></code></pre></div>
<p><img src="book_temp_files/figure-html/unnamed-chunk-708-1.png" width="672"></p>
<p>The bimodal, polarized distribution holds across both genders. However, it seems that females have more higher rates of disapproval (more 1s and 2s).</p>
<div class="sourceCode" id="cb902"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb902-1"><a href="discrete-response.html#cb902-1"></a>cces_ch12 <span class="op">%&gt;%</span></span>
<span id="cb902-2"><a href="discrete-response.html#cb902-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(approval) <span class="op">==</span><span class="st"> </span><span class="ot">FALSE</span>) <span class="op">%&gt;%</span></span>
<span id="cb902-3"><a href="discrete-response.html#cb902-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> approval, <span class="dt">fill =</span> race)) <span class="op">+</span></span>
<span id="cb902-4"><a href="discrete-response.html#cb902-4"></a><span class="st">  </span><span class="kw">geom_bar</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb902-5"><a href="discrete-response.html#cb902-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">"Count"</span>,</span>
<span id="cb902-6"><a href="discrete-response.html#cb902-6"></a>       <span class="dt">x =</span> <span class="st">"Presidential Approval"</span>,</span>
<span id="cb902-7"><a href="discrete-response.html#cb902-7"></a>       <span class="dt">title =</span> <span class="st">"Presidential Approval in 2018 by Race"</span>) <span class="op">+</span></span>
<span id="cb902-8"><a href="discrete-response.html#cb902-8"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>race) <span class="op">+</span><span class="st"> </span></span>
<span id="cb902-9"><a href="discrete-response.html#cb902-9"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">"none"</span>) <span class="op">+</span></span>
<span id="cb902-10"><a href="discrete-response.html#cb902-10"></a><span class="st">  </span><span class="kw">scale_y_log10</span>()</span></code></pre></div>
<p><img src="book_temp_files/figure-html/unnamed-chunk-709-1.png" width="672"></p>
<p>Note the log10 scale on the y-axis; this was done so that we can see clearly the distribution for races that have very few observations compared to white individuals. We can see here that the bimodel distribution is present across all races, with slight variations from race to race.</p>
<p>Now, let’s take a look at our ideology variable. <code>ideology</code> has values “Very Liberal”, “Liberal”, “Moderate”, “Conservative”, “Very Conservative”, and “Not Sure”. Let’s make these variables numeric so that they are easier to work with by recoding them to 1, 2, 3, 4, 5, and NA, respectively.</p>
<div class="sourceCode" id="cb903"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb903-1"><a href="discrete-response.html#cb903-1"></a>cces_ch12 &lt;-<span class="st"> </span>cces_ch12 <span class="op">%&gt;%</span></span>
<span id="cb903-2"><a href="discrete-response.html#cb903-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ideology =</span> <span class="kw">case_when</span>(</span>
<span id="cb903-3"><a href="discrete-response.html#cb903-3"></a>    ideology <span class="op">==</span><span class="st"> "Very Liberal"</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb903-4"><a href="discrete-response.html#cb903-4"></a>    ideology <span class="op">==</span><span class="st"> "Liberal"</span> <span class="op">~</span><span class="st"> </span><span class="dv">2</span>,</span>
<span id="cb903-5"><a href="discrete-response.html#cb903-5"></a>    ideology <span class="op">==</span><span class="st"> "Moderate"</span> <span class="op">~</span><span class="st"> </span><span class="dv">3</span>,</span>
<span id="cb903-6"><a href="discrete-response.html#cb903-6"></a>    ideology <span class="op">==</span><span class="st"> "Conservative"</span> <span class="op">~</span><span class="st"> </span><span class="dv">4</span>,</span>
<span id="cb903-7"><a href="discrete-response.html#cb903-7"></a>    ideology <span class="op">==</span><span class="st"> "Very Conservative"</span> <span class="op">~</span><span class="st"> </span><span class="dv">5</span>,</span>
<span id="cb903-8"><a href="discrete-response.html#cb903-8"></a>    ideology <span class="op">==</span><span class="st"> "Not Sure"</span> <span class="op">~</span><span class="st">  </span><span class="ot">NA_real_</span>))</span></code></pre></div>
<p>Now that we have ideology as a numeric variable, we will make a barplot to get a sense of the distribution.</p>
<div class="sourceCode" id="cb904"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb904-1"><a href="discrete-response.html#cb904-1"></a>cces_ch12 <span class="op">%&gt;%</span></span>
<span id="cb904-2"><a href="discrete-response.html#cb904-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(ideology) <span class="op">==</span><span class="st"> </span><span class="ot">FALSE</span>) <span class="op">%&gt;%</span></span>
<span id="cb904-3"><a href="discrete-response.html#cb904-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> ideology)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb904-4"><a href="discrete-response.html#cb904-4"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">fill =</span> <span class="st">"blue"</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb904-5"><a href="discrete-response.html#cb904-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">"Ideology"</span>,</span>
<span id="cb904-6"><a href="discrete-response.html#cb904-6"></a>       <span class="dt">title =</span> <span class="st">"Ideology in CCES 2018"</span>)</span></code></pre></div>
<p><img src="book_temp_files/figure-html/unnamed-chunk-711-1.png" width="672"></p>
<p>There is a unimodal disitribution in ideology, with most respondents being moderate. This is interesting, considering how polarized the presidential approval was before. Let’s create a jitterplot between <code>ideology</code> and <code>approval</code> to look into this more.</p>
<div class="sourceCode" id="cb905"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb905-1"><a href="discrete-response.html#cb905-1"></a>cces_ch12 <span class="op">%&gt;%</span></span>
<span id="cb905-2"><a href="discrete-response.html#cb905-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(ideology) <span class="op">==</span><span class="st"> </span><span class="ot">FALSE</span>) <span class="op">%&gt;%</span></span>
<span id="cb905-3"><a href="discrete-response.html#cb905-3"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(approval) <span class="op">==</span><span class="st"> </span><span class="ot">FALSE</span>) <span class="op">%&gt;%</span></span>
<span id="cb905-4"><a href="discrete-response.html#cb905-4"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> ideology, <span class="dt">y =</span> approval)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb905-5"><a href="discrete-response.html#cb905-5"></a><span class="st">  </span><span class="kw">geom_jitter</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb905-6"><a href="discrete-response.html#cb905-6"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">"Presidential Approval"</span>,</span>
<span id="cb905-7"><a href="discrete-response.html#cb905-7"></a>       <span class="dt">x =</span> <span class="st">"Ideology"</span>,</span>
<span id="cb905-8"><a href="discrete-response.html#cb905-8"></a>       <span class="dt">title =</span> <span class="st">"Presidential Approval by Ideology"</span>)</span></code></pre></div>
<p><img src="book_temp_files/figure-html/unnamed-chunk-712-1.png" width="672"></p>
<!-- MB: just need to talk about this to finish EDA. Holding off until we figure out why there are literally no 3s-->
</div>
<div id="logistic-regression" class="section level2">
<h2>
<span class="header-section-number">11.2</span> Logistic regression</h2>
<div id="what-is-logistic-regression" class="section level3">
<h3>
<span class="header-section-number">11.2.1</span> What is logistic regression?</h3>
<p>Now that we know our dataset a little better, let’s begin our first way of modelling binary/discrete data: logistic regressions.</p>
<p>Figure <a href="discrete-response.html#fig:OLSlogistic">11.1</a> illustrates a data set with a binary (0 or 1) response (<span class="math inline">\(Y\)</span>) and a single continuous predictor (<span class="math inline">\(X\)</span>). The blue line is a linear regression to model the probability of a success (<span class="math inline">\(Y=1\)</span>) for a given value of <span class="math inline">\(X\)</span>. With a binary response, the linear regression has an obvious problem: it can produce predicted probabilities below 0 and above 1. Probabilities can only range from 0 up to and including 1 as these represent a 0% and 100% chance of an event happening, respectively.</p>
<p>The red curve is the <em>logistic regression</em> curve. Note that its characteristic “S” shape always produces predicted probabilities between 0 and 1. Here is the formula for a logistic regression:</p>
<p>Where <span class="math inline">\(p\)</span> is the probability of a “yes” or “success” for a given set of predictors <span class="math inline">\(X\)</span>.</p>
<!-- Revisit nomenclature after chapter 5 -->
<div class="figure" style="text-align: center">
<span id="fig:OLSlogistic"></span>
<p class="caption marginnote shownote">
FIGURE 11.1: Linear vs. logistic regression models for binary response data.
</p>
<img src="book_temp_files/figure-html/OLSlogistic-1.png" alt="Linear vs. logistic regression models for binary response data." width="60%">
</div>
<!-- DK: How does the math work here? log(p/1-p) seems, to me, to map 0,1 to 0,infinity. -->
<p>The mathematical function <span class="math inline">\(log\left(\frac{p}{1 - p}\right)\)</span> is called the <em>logit function</em> and it transforms variables from the space <span class="math inline">\((0, 1)\)</span> (like probabilities) to <span class="math inline">\((-\infty, \infty)\)</span>. The inverse of that function, the <em>standard logistic function</em>, is <span class="math inline">\(\frac{1}{1 + e^{-x}}\)</span> and transforms variables from the space <span class="math inline">\((-\infty, \infty)\)</span> to <span class="math inline">\((0, 1)\)</span>. From that latter function’s name we get the terminology of <em>logistic regression</em>.</p>
</div>
<div id="one-categorical-explanatory-variable" class="section level3">
<h3>
<span class="header-section-number">11.2.2</span> One categorical explanatory variable</h3>
<p>Let’s start our modeling by predicting <code>approval</code> with a single categorical explanatory variable. However, there’s one problem: approval is not a binary variable and, therefore, this wouldn’t be a logistic regression. In order to make this a logistic regression, we have to turn approval into a binary variable. 1-2 will be coded to 0 to signify disapproval and 3-5 will be coded to 1 for approval.</p>
<div class="sourceCode" id="cb906"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb906-1"><a href="discrete-response.html#cb906-1"></a>cces_ch12 &lt;-<span class="st"> </span>cces_ch12 <span class="op">%&gt;%</span></span>
<span id="cb906-2"><a href="discrete-response.html#cb906-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">approval =</span> <span class="kw">case_when</span>(</span>
<span id="cb906-3"><a href="discrete-response.html#cb906-3"></a>    approval <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span>,</span>
<span id="cb906-4"><a href="discrete-response.html#cb906-4"></a>    approval <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span>,</span>
<span id="cb906-5"><a href="discrete-response.html#cb906-5"></a>    approval <span class="op">==</span><span class="st"> </span><span class="dv">3</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb906-6"><a href="discrete-response.html#cb906-6"></a>    approval <span class="op">==</span><span class="st"> </span><span class="dv">4</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb906-7"><a href="discrete-response.html#cb906-7"></a>    approval <span class="op">==</span><span class="st"> </span><span class="dv">5</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>))</span></code></pre></div>
<!-- MB: Jumping straight to multiple categories here rather than just a binary one. Should I do one for gender? -->
<p>We’ll start by modeling our new binary <code>approval</code> with the categorical variable <code>race</code>. As we’ll see, the syntax for running a logistic regression in R is very similar to that for running a linear regression. In fact, we’ll follow the same basic steps:</p>
<ol style="list-style-type: decimal">
<li>We first “fit” the logistic regression model using the <code>glm(y ~ x, family, data)</code> function and save it in <code>race_model</code>.</li>
<li>We get the regression table by applying the <code>tidy()</code> function from the <strong>broom</strong> package to <code>race_model</code>. We’ll print the <code>term</code>, <code>estimate</code>, <code>conf.low</code>, and <code>conf.high</code> columns.</li>
</ol>
<p>Note that the key difference is that instead of using <code>lm()</code>, we are now using <code>glm()</code>. <code>glm()</code> operates very similarly to <code>lm()</code>, but it has an additional argument: <code>family</code>. To run a logistic regression, we use <code>family = binomial</code>. This means that it will be modelled along the red line in Figure <a href="discrete-response.html#fig:OLSlogistic">11.1</a> rather than the blue line.</p>
<p>Next, let’s fit a model and <code>tidy()</code> it:</p>
<div class="sourceCode" id="cb907"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb907-1"><a href="discrete-response.html#cb907-1"></a>race_model &lt;-<span class="st"> </span><span class="kw">glm</span>(approval <span class="op">~</span><span class="st"> </span>race, <span class="dt">family =</span> binomial, <span class="dt">data =</span> cces_ch12)</span>
<span id="cb907-2"><a href="discrete-response.html#cb907-2"></a>race_model <span class="op">%&gt;%</span></span>
<span id="cb907-3"><a href="discrete-response.html#cb907-3"></a><span class="st">  </span><span class="kw">tidy</span>(<span class="dt">conf.int =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb907-4"><a href="discrete-response.html#cb907-4"></a><span class="st">  </span><span class="kw">select</span>(term, estimate, conf.low, conf.high)</span></code></pre></div>
<p><style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#zmaszwdpqy .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zmaszwdpqy .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zmaszwdpqy .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zmaszwdpqy .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zmaszwdpqy .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zmaszwdpqy .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zmaszwdpqy .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zmaszwdpqy .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zmaszwdpqy .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zmaszwdpqy .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zmaszwdpqy .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zmaszwdpqy .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#zmaszwdpqy .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zmaszwdpqy .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zmaszwdpqy .gt_from_md > :first-child {
  margin-top: 0;
}

#zmaszwdpqy .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zmaszwdpqy .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zmaszwdpqy .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#zmaszwdpqy .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zmaszwdpqy .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#zmaszwdpqy .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zmaszwdpqy .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zmaszwdpqy .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zmaszwdpqy .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zmaszwdpqy .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#zmaszwdpqy .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zmaszwdpqy .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#zmaszwdpqy .gt_left {
  text-align: left;
}

#zmaszwdpqy .gt_center {
  text-align: center;
}

#zmaszwdpqy .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zmaszwdpqy .gt_font_normal {
  font-weight: normal;
}

#zmaszwdpqy .gt_font_bold {
  font-weight: bold;
}

#zmaszwdpqy .gt_font_italic {
  font-style: italic;
}

#zmaszwdpqy .gt_super {
  font-size: 65%;
}

#zmaszwdpqy .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style></p>
<div id="zmaszwdpqy" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">term</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">estimate</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_left">(Intercept)</td>
      <td class="gt_row gt_right">-0.875</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceBlack</td>
      <td class="gt_row gt_right">-0.810</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceHispanic</td>
      <td class="gt_row gt_right">0.020</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceMiddle Eastern</td>
      <td class="gt_row gt_right">0.076</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceMixed</td>
      <td class="gt_row gt_right">0.034</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceNative American</td>
      <td class="gt_row gt_right">1.010</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceOther</td>
      <td class="gt_row gt_right">1.179</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceWhite</td>
      <td class="gt_row gt_right">0.857</td>
    </tr>
</tbody>
</table></div>
The intercept here is the omitted category, Asian.
<p>How can we interpret the coefficients? Unlike linear regressions, these coefficients aren’t directly interpretable. Recall our logistic regression model equation:</p>
<p><span class="math display">\[
\log\left(\frac{p}{1 - p}\right)=\beta_0+\beta_1X 
\]</span></p>
<p>A one-unit change in <span class="math inline">\(X\)</span> thus is associated with a one-unit change in <span class="math inline">\(log\left(\frac{p}{1 - p}\right)\)</span>, where <span class="math inline">\(p\)</span> is the predicted probability of success. It is hard to understand intuitively what this means. We can directly calculate all the possible values of <span class="math inline">\(p\)</span> this model by using the <em>standard logistic function</em>:</p>
<p><span class="math display">\[
p = \frac{1}{1 + e^{-(\beta_0+\beta_1X)}} 
\]</span></p>
<p>We can first use this formula to fill <span class="math inline">\(b_0\)</span> with the intercept (representing Asians) and omit the <span class="math inline">\(b_1\)</span> as we are solving for the probability of an Asian American approving of the President.</p>
<p><span class="math display">\[
p_{pres\_approve} = \frac{1}{1 + e^{-(-1.06)}} = 0.257
\]</span></p>
<p>We can then fill in the <span class="math inline">\(b_1\)</span> term to calculate the probabilities of all races:
- White: <span class="math inline">\(\frac{1}{1 + e^{-(-1.06 + 0.99)}} = 0.482\)</span>
- Black: <span class="math inline">\(\frac{1}{1 + e^{-(-1.06-1.01)}} = 0.112\)</span>
- Hispanic: <span class="math inline">\(\frac{1}{1 + e^{-(-1.06 + 0.036)}} = 0.264\)</span>
- Middle Eastern: <span class="math inline">\(\frac{1}{1 + e^{-(-1.06 + 0.007)}} = 0.259\)</span>
- Native American: <span class="math inline">\(\frac{1}{1 + e^{-(-1.06 + 1.1)}} = 0.51\)</span>
- Mixed: <span class="math inline">\(\frac{1}{1 + e^{-(-1.06 + 0.071)}} = 0.271\)</span>
- Other: <span class="math inline">\(\frac{1}{1 + e^{-(-1.06 + 1.3)}} = 0.559\)</span></p>
<!-- We can then interpret the effect of moving from one category to another.  For example, the predicted probability of a White voter approving of the President is 0.225 greater than an Asian voter. Note that we could have obtained this through the *divide by 4 rule*:  $0.482 / 4 \approx 0.16$. -->
<!-- MB: Hold off until numeric variable for divide by 4?-->
<p>However, there is a way to calculate these predicted probabilities using R without doing all of the math of the standard logistic function..</p>
<p>We have previously defined the following three concepts for a linear regression:</p>
<ol style="list-style-type: decimal">
<li>Observed values <span class="math inline">\(y\)</span>, or the observed value of the outcome variable</li>
<li>Fitted values <span class="math inline">\(\hat{y}\)</span>, or the value on the regression line for a given <span class="math inline">\(x\)</span> value</li>
<li>Residuals <span class="math inline">\(y - \hat{y}\)</span>, or the error between the observed value and the fitted value</li>
</ol>
<p>We obtained these values and other values using the <code>augment()</code> function from the <strong>broom</strong> package. Recall too that we used the <code>.se.fit</code> column to construct confidence intervals. We’ll see here how we can apply these same concepts to logistic regression.</p>
<!-- MB: .se.fit into cooksd???-->
<div class="sourceCode" id="cb908"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb908-1"><a href="discrete-response.html#cb908-1"></a>regression_points &lt;-<span class="st"> </span>race_model <span class="op">%&gt;%</span></span>
<span id="cb908-2"><a href="discrete-response.html#cb908-2"></a><span class="st">  </span><span class="kw">augment</span>() <span class="op">%&gt;%</span></span>
<span id="cb908-3"><a href="discrete-response.html#cb908-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">conf.low =</span> .fitted <span class="op">-</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>.cooksd,</span>
<span id="cb908-4"><a href="discrete-response.html#cb908-4"></a>         <span class="dt">conf.high =</span> .fitted <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>.cooksd) <span class="op">%&gt;%</span></span>
<span id="cb908-5"><a href="discrete-response.html#cb908-5"></a><span class="st">  </span><span class="kw">select</span>(approval, race, .fitted, conf.low, conf.high, .resid)</span>
<span id="cb908-6"><a href="discrete-response.html#cb908-6"></a>regression_points</span></code></pre></div>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#gftpbmcjfg .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gftpbmcjfg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gftpbmcjfg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gftpbmcjfg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gftpbmcjfg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gftpbmcjfg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gftpbmcjfg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gftpbmcjfg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gftpbmcjfg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gftpbmcjfg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gftpbmcjfg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gftpbmcjfg .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#gftpbmcjfg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gftpbmcjfg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gftpbmcjfg .gt_from_md > :first-child {
  margin-top: 0;
}

#gftpbmcjfg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gftpbmcjfg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gftpbmcjfg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#gftpbmcjfg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gftpbmcjfg .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#gftpbmcjfg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gftpbmcjfg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gftpbmcjfg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gftpbmcjfg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gftpbmcjfg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#gftpbmcjfg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gftpbmcjfg .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#gftpbmcjfg .gt_left {
  text-align: left;
}

#gftpbmcjfg .gt_center {
  text-align: center;
}

#gftpbmcjfg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gftpbmcjfg .gt_font_normal {
  font-weight: normal;
}

#gftpbmcjfg .gt_font_bold {
  font-weight: bold;
}

#gftpbmcjfg .gt_font_italic {
  font-style: italic;
}

#gftpbmcjfg .gt_super {
  font-size: 65%;
}

#gftpbmcjfg .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="gftpbmcjfg" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">approval</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">race</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">.fitted</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">conf.low</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">conf.high</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">.resid</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_right">0</td>
      <td class="gt_row gt_left">Black</td>
      <td class="gt_row gt_right">-1.685</td>
      <td class="gt_row gt_right">-1.685</td>
      <td class="gt_row gt_right">-1.685</td>
      <td class="gt_row gt_right">-0.58</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">0</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-1.17</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">0</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-1.17</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">0</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-0.018</td>
      <td class="gt_row gt_right">-1.17</td>
    </tr>
</tbody>
<tfoot class="gt_sourcenotes"><tr>
<td class="gt_sourcenote" colspan="6">Regression points (First 10 out of 60,000 voters)</td>
    </tr></tfoot>
</table></div>
<p>The syntax is the same, but the interpretation has to change, since the <code>.fitted</code>, <code>conf.low</code>, and <code>conf.high</code> columns are all on the logit scale. While we could try to interpret these values, <code>augment()</code> has the argument <code>type.predict = "response"</code> that allow us to present the results in terms of <em>predicted probabilities</em>:</p>
<div class="sourceCode" id="cb909"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb909-1"><a href="discrete-response.html#cb909-1"></a>regression_points &lt;-<span class="st"> </span>race_model <span class="op">%&gt;%</span></span>
<span id="cb909-2"><a href="discrete-response.html#cb909-2"></a><span class="st">  </span><span class="kw">augment</span>(<span class="dt">type.predict =</span> <span class="st">"response"</span>) <span class="op">%&gt;%</span></span>
<span id="cb909-3"><a href="discrete-response.html#cb909-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">conf.low =</span> .fitted <span class="op">-</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>.cooksd,</span>
<span id="cb909-4"><a href="discrete-response.html#cb909-4"></a>         <span class="dt">conf.high =</span> .fitted <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>.cooksd) <span class="op">%&gt;%</span></span>
<span id="cb909-5"><a href="discrete-response.html#cb909-5"></a><span class="st">  </span><span class="kw">select</span>(approval, race, .fitted, conf.low, conf.high, .resid)</span>
<span id="cb909-6"><a href="discrete-response.html#cb909-6"></a>regression_points</span></code></pre></div>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#qawackmwre .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qawackmwre .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qawackmwre .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qawackmwre .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qawackmwre .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qawackmwre .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qawackmwre .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qawackmwre .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qawackmwre .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qawackmwre .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qawackmwre .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qawackmwre .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#qawackmwre .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qawackmwre .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qawackmwre .gt_from_md > :first-child {
  margin-top: 0;
}

#qawackmwre .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qawackmwre .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qawackmwre .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#qawackmwre .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qawackmwre .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#qawackmwre .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qawackmwre .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qawackmwre .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qawackmwre .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qawackmwre .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#qawackmwre .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qawackmwre .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#qawackmwre .gt_left {
  text-align: left;
}

#qawackmwre .gt_center {
  text-align: center;
}

#qawackmwre .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qawackmwre .gt_font_normal {
  font-weight: normal;
}

#qawackmwre .gt_font_bold {
  font-weight: bold;
}

#qawackmwre .gt_font_italic {
  font-style: italic;
}

#qawackmwre .gt_super {
  font-size: 65%;
}

#qawackmwre .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="qawackmwre" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">approval</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">race</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">.fitted</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">conf.low</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">conf.high</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">.resid</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_right">0</td>
      <td class="gt_row gt_left">Black</td>
      <td class="gt_row gt_right">0.16</td>
      <td class="gt_row gt_right">0.16</td>
      <td class="gt_row gt_right">0.16</td>
      <td class="gt_row gt_right">-0.58</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">0</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">-1.17</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">0</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">-1.17</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">0</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">-1.17</td>
    </tr>
</tbody>
<tfoot class="gt_sourcenotes"><tr>
<td class="gt_sourcenote" colspan="6">Regression points (First 10 out of 60,000 voters)</td>
    </tr></tfoot>
</table></div>
<p>Now each of the <code>.fitted</code> values is a <em>predicted probability</em> of a Democratic victory from our model for a particular district and the confidence intervals are confidence intervals around that predicted probability. You’ll notice how the fitted value in this table is the same as the probabilities we calculated by hand using the standard logistical function.</p>
<p>You may be wondering how to interpret the residuals. The residuals reported by <code>augment()</code> for a logistic regression are called <em>deviance residuals</em>. A deviance residual can be calculated for each observation using:</p>
<p><span class="math display">\[
\textrm{d}_i = 
\textrm{sign}(Y_i-\hat{p_i})\sqrt{-2 [ Y_i \text{log} \hat{p_i} + (1 - Y_i) \text{log} (1 - \hat{p_i}) ]}
\]</span></p>
<p>where <span class="math inline">\(Y_i\)</span> is the actual outcome and <span class="math inline">\(p_i\)</span> is the predicted probability from the logistic regression model.</p>
<p>The sum of the individual deviance residuals is referred to as the <strong>deviance</strong> or <strong>residual deviance</strong>. The deviance is used to assess the model. As the name suggests, a model with a small deviance is preferred.</p>
<p>However, you can also have <code>augment()</code> report residuals as differences between the observed outcome and the predicted probabilities by using <code>type.residuals = "deviance"</code>:</p>
<!-- type.residuals from response to deviance -->
<div class="sourceCode" id="cb910"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb910-1"><a href="discrete-response.html#cb910-1"></a>regression_points &lt;-<span class="st"> </span>race_model <span class="op">%&gt;%</span></span>
<span id="cb910-2"><a href="discrete-response.html#cb910-2"></a><span class="st">  </span><span class="kw">augment</span>(<span class="dt">type.predict =</span> <span class="st">"response"</span>,</span>
<span id="cb910-3"><a href="discrete-response.html#cb910-3"></a>          <span class="dt">type.residuals =</span> <span class="st">"deviance"</span>) <span class="op">%&gt;%</span></span>
<span id="cb910-4"><a href="discrete-response.html#cb910-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">conf.low =</span> .fitted <span class="op">-</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>.cooksd,</span>
<span id="cb910-5"><a href="discrete-response.html#cb910-5"></a>         <span class="dt">conf.high =</span> .fitted <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>.cooksd) <span class="op">%&gt;%</span></span>
<span id="cb910-6"><a href="discrete-response.html#cb910-6"></a><span class="st">  </span><span class="kw">select</span>(approval, race, .fitted, conf.low, conf.high, .resid)</span>
<span id="cb910-7"><a href="discrete-response.html#cb910-7"></a>regression_points</span></code></pre></div>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#zzphbdxyfq .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zzphbdxyfq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zzphbdxyfq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zzphbdxyfq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zzphbdxyfq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zzphbdxyfq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zzphbdxyfq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zzphbdxyfq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zzphbdxyfq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zzphbdxyfq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zzphbdxyfq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zzphbdxyfq .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#zzphbdxyfq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zzphbdxyfq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zzphbdxyfq .gt_from_md > :first-child {
  margin-top: 0;
}

#zzphbdxyfq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zzphbdxyfq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zzphbdxyfq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#zzphbdxyfq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zzphbdxyfq .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#zzphbdxyfq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zzphbdxyfq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zzphbdxyfq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zzphbdxyfq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zzphbdxyfq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#zzphbdxyfq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zzphbdxyfq .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#zzphbdxyfq .gt_left {
  text-align: left;
}

#zzphbdxyfq .gt_center {
  text-align: center;
}

#zzphbdxyfq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zzphbdxyfq .gt_font_normal {
  font-weight: normal;
}

#zzphbdxyfq .gt_font_bold {
  font-weight: bold;
}

#zzphbdxyfq .gt_font_italic {
  font-style: italic;
}

#zzphbdxyfq .gt_super {
  font-size: 65%;
}

#zzphbdxyfq .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="zzphbdxyfq" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">approval</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">race</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">.fitted</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">conf.low</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">conf.high</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">.resid</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_right">0</td>
      <td class="gt_row gt_left">Black</td>
      <td class="gt_row gt_right">0.16</td>
      <td class="gt_row gt_right">0.16</td>
      <td class="gt_row gt_right">0.16</td>
      <td class="gt_row gt_right">-0.58</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">0</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">-1.17</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">0</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">-1.17</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">1</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">1.18</td>
    </tr>
<tr>
<td class="gt_row gt_right">0</td>
      <td class="gt_row gt_left">White</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">0.50</td>
      <td class="gt_row gt_right">-1.17</td>
    </tr>
</tbody>
<tfoot class="gt_sourcenotes"><tr>
<td class="gt_sourcenote" colspan="6">Regression points (First 10 out of 60,000 voters)</td>
    </tr></tfoot>
</table></div>
<p>Now, the <code>.resid</code> value is the difference between the actual outcome (<code>approval</code>) and the predicted probability.</p>
</div>
<div id="one-numerical-explanatory-variable" class="section level3">
<h3>
<span class="header-section-number">11.2.3</span> One numerical explanatory variable</h3>
<p>We’ll now predict <code>approval</code> with a single numerical explanatory variable, <code>age</code>.</p>
<ol style="list-style-type: decimal">
<li>We first “fit” the logistic regression model using the <code>glm(y ~ x, family, data)</code> function and save it in <code>age_model</code>.</li>
<li>We get the regression table by applying the <code>tidy()</code> function from the <strong>broom</strong> package to <code>age_model</code>. We’ll print the <code>term</code>, <code>estimate</code>, <code>conf.low</code>, and <code>conf.high</code> columns.</li>
</ol>
<div class="sourceCode" id="cb911"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb911-1"><a href="discrete-response.html#cb911-1"></a>age_model &lt;-<span class="st"> </span><span class="kw">glm</span>(approval <span class="op">~</span><span class="st"> </span>age, <span class="dt">family =</span> binomial, <span class="dt">data =</span> cces_ch12)</span>
<span id="cb911-2"><a href="discrete-response.html#cb911-2"></a>age_model <span class="op">%&gt;%</span></span>
<span id="cb911-3"><a href="discrete-response.html#cb911-3"></a><span class="st">  </span><span class="kw">tidy</span>(<span class="dt">conf.int =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb911-4"><a href="discrete-response.html#cb911-4"></a><span class="st">  </span><span class="kw">select</span>(term, estimate, conf.low, conf.high)</span></code></pre></div>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ximnikehcs .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ximnikehcs .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ximnikehcs .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ximnikehcs .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ximnikehcs .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ximnikehcs .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ximnikehcs .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ximnikehcs .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ximnikehcs .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ximnikehcs .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ximnikehcs .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ximnikehcs .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ximnikehcs .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ximnikehcs .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ximnikehcs .gt_from_md > :first-child {
  margin-top: 0;
}

#ximnikehcs .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ximnikehcs .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ximnikehcs .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#ximnikehcs .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ximnikehcs .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#ximnikehcs .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ximnikehcs .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ximnikehcs .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ximnikehcs .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ximnikehcs .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#ximnikehcs .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ximnikehcs .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#ximnikehcs .gt_left {
  text-align: left;
}

#ximnikehcs .gt_center {
  text-align: center;
}

#ximnikehcs .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ximnikehcs .gt_font_normal {
  font-weight: normal;
}

#ximnikehcs .gt_font_bold {
  font-weight: bold;
}

#ximnikehcs .gt_font_italic {
  font-style: italic;
}

#ximnikehcs .gt_super {
  font-size: 65%;
}

#ximnikehcs .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="ximnikehcs" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">term</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">estimate</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">conf.low</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">conf.high</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_left">(Intercept)</td>
      <td class="gt_row gt_right">-1.191</td>
      <td class="gt_row gt_right">-1.240</td>
      <td class="gt_row gt_right">-1.14</td>
    </tr>
<tr>
<td class="gt_row gt_left">age</td>
      <td class="gt_row gt_right">0.019</td>
      <td class="gt_row gt_right">0.018</td>
      <td class="gt_row gt_right">0.02</td>
    </tr>
</tbody>
<tfoot class="gt_sourcenotes"><tr>
<td class="gt_sourcenote" colspan="4">Logistical Regression Table</td>
    </tr></tfoot>
</table></div>
<p>How do we interpret the coefficients in this model? Since the <code>age</code> coefficient is positive, that means that each additional year of age is associated with a higher approval of the President in 2018.</p>
<p>If we wanted to learn the predicted probabilities for any given value of <code>age</code>, we can plug in our values of <code>age</code> into the standard logistic function, like so:</p>
<p><span class="math display">\[
p_{dem\_win} = \frac{1}{1 + e^{-(-1.43 + 0.023 \times year)}} 
\]</span></p>
<p>For example, the predicted probability of a 90-year-old approving of the President is 65.4% while the predicted probability of a 19-year-old approving of the President is 27%.</p>
<p>Note that since this is not a linear function, a one-unit change in <code>year</code> will be associated with various one-unit changes in <code>year</code>, depending on what <code>year</code> you are starting from. Recall the figure we used to start the chapter:</p>
<p>A one-unit change in <span class="math inline">\(X\)</span> thus is associated with a one-unit change in <span class="math inline">\(log\left(\frac{p}{1 - p}\right)\)</span>, where <span class="math inline">\(p\)</span> is the predicted probability of success. It is hard to understand intuitively what this means. We can directly calculate all the possible values of <span class="math inline">\(p\)</span> this model by using the <em>standard logistic function</em>:</p>
<p><img src="book_temp_files/figure-html/unnamed-chunk-724-1.png" width="672"></p>
<p>A linear regression line (in blue) has a constant slope, which means that no matter what <span class="math inline">\(x\)</span> you start with, the effect of going from <span class="math inline">\(x\)</span> to <span class="math inline">\(x + 1\)</span> on <span class="math inline">\(y\)</span> is the same number. However, take a look at the logistic regression curve (in red). The value of the slope for very high or very low values of <span class="math inline">\(x\)</span> is smaller (approaching 0 as <span class="math inline">\(x\)</span> tends to negative or positive infinity), while the slope in the middle of the curve is highest. The steepest part of the curve corresponds to that part of the curve where the predicted probability equals 0.5. That is, the effect of a one-unit change in <span class="math inline">\(x\)</span> is the highest when the predicted probability for that <span class="math inline">\(x\)</span> is close to 0.5 and smallest when the predicted probability for that <span class="math inline">\(x\)</span> is close to 0 or 1.</p>
<p>You can always use R to calculate the predicted probabilities for any value of <span class="math inline">\(x\)</span> and thus calculate the effect of moving from a particular <span class="math inline">\(x\)</span> to <span class="math inline">\(x + 1\)</span>. But this can get complicated. In particular, once you start employing logistic regression with multiple predictors, the effect of a one-unit change in a predictor <span class="math inline">\(x\)</span> depends not only on <span class="math inline">\(x\)</span>, but on the values of all the other predictors in your model! You can always plug in all the coefficients and values of your predictors into the logistic function to calculate predicted probabilities, but if you don’t do that, how can you interpret the coefficients?</p>
<p>Here is where we can use the <em>divide by 4 rule</em> that we discussed before. A logistic regression coefficient divided by 4 is the effect of that variable at the steepest part of the logistic regression curve, which, as we just saw, corresponds to where the predicted probability is 0.5.</p>
<p>Therefore, you can divide a logistic regression coefficient by 4 to get an upper bound on the effect a one-unit change in that predictor will have on the predicted probability of your outcome. In this case, the approximation tells us that each additional year of age is associated with about a <span class="math inline">\(0.023 / 4 = 0.005\)</span> increase in the predicted probability of a voter approving of the President.</p>
<p>While <code>race_model</code> and <code>age_model</code> both tell us something interesting, we could learn more with an <em>interaction model</em> that includes both of our predictors.</p>
</div>
<div id="one-numerical-and-one-categorical-explanatory-variable" class="section level3">
<h3>
<span class="header-section-number">11.2.4</span> One numerical and one categorical explanatory variable</h3>
<p>We’ll now predict <code>approval</code> with two variables, <code>race</code> and <code>age</code>, as well as the interaction between the two.</p>
<p>This time, we’ll do it slightly differently. Rather than using <code>glm()</code> like we did in the last two examples, we’ll instead be using tools from a package called <strong>tidymodels</strong>. Rather than having to use a different function each time we construct a model (choosing between lm(), glm(), and other modelling function), <strong>tidymodels</strong> streamlines the synthax for any model we want to construct.</p>
<div class="sourceCode" id="cb912"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb912-1"><a href="discrete-response.html#cb912-1"></a><span class="kw">library</span>(tidymodels)</span></code></pre></div>
<p><strong>tidymodels</strong> includes many packages, but we’ll start by showing how to use <strong>parsnip</strong> to fit a logistic regression.</p>
<p>First, in the <strong>tidymodels</strong> workflow, we have to save the <em>model specification</em>. We do that using two functions: <code>logistic_reg()</code> and <code>set_engine()</code>.</p>
<div class="sourceCode" id="cb913"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb913-1"><a href="discrete-response.html#cb913-1"></a>logistic_mod &lt;-<span class="st"> </span><span class="kw">logistic_reg</span>() <span class="op">%&gt;%</span></span>
<span id="cb913-2"><a href="discrete-response.html#cb913-2"></a><span class="st">  </span><span class="kw">set_engine</span>(<span class="st">"glm"</span>)</span></code></pre></div>
<p><code>logistic_reg()</code> says that we want to fit a logistic regression, and <code>set_engine("glm")</code> specifies that we want to do it using <code>glm()</code>. Behind the scenes, <strong>parsnip</strong> uses many other packages to fit its models, but by unifying the syntax, it means that you don’t have to memorize how a lot of different functions work.</p>
<p>Note that our new object, <code>logistic_mod</code>, doesn’t contain our data or a formula. In order actually to fit our model, we need to feed <code>logistic_mod</code> to a function called <code>fit()</code>. <code>fit()</code> is the general purpose function in <strong>parsnip</strong> for fitting any model specification. It takes as its first argument the model specification, but otherwise it operates similarly to <code>lm()</code> and <code>glm()</code>. We have to wrap <code>approval</code> in <code>factor()</code>, because <code>fit()</code> is more careful than <code>glm()</code> in requiring that classification models actually have categorical outcomes.</p>
<div class="sourceCode" id="cb914"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb914-1"><a href="discrete-response.html#cb914-1"></a>logistic_fit &lt;-<span class="st"> </span><span class="kw">fit</span>(logistic_mod,</span>
<span id="cb914-2"><a href="discrete-response.html#cb914-2"></a>                    <span class="kw">factor</span>(approval) <span class="op">~</span><span class="st"> </span>race <span class="op">*</span><span class="st"> </span>age,</span>
<span id="cb914-3"><a href="discrete-response.html#cb914-3"></a>                    <span class="dt">data =</span> cces_ch12)</span></code></pre></div>
<p>One we have fit the model, how can we use it? The <code>glm</code> object is still stored in <code>logistic_fit$fit</code>, so we can access that and use <code>tidy()</code>, just like we did before:</p>
<div class="sourceCode" id="cb915"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb915-1"><a href="discrete-response.html#cb915-1"></a>logistic_fit<span class="op">$</span>fit <span class="op">%&gt;%</span></span>
<span id="cb915-2"><a href="discrete-response.html#cb915-2"></a><span class="st">  </span><span class="kw">tidy</span>(<span class="dt">conf.int =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb915-3"><a href="discrete-response.html#cb915-3"></a><span class="st">  </span><span class="kw">select</span>(term, estimate, conf.low, conf.high) <span class="op">%&gt;%</span></span>
<span id="cb915-4"><a href="discrete-response.html#cb915-4"></a><span class="st">  </span><span class="kw">gt</span>()</span></code></pre></div>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#satdmahuej .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#satdmahuej .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#satdmahuej .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#satdmahuej .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#satdmahuej .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#satdmahuej .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#satdmahuej .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#satdmahuej .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#satdmahuej .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#satdmahuej .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#satdmahuej .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#satdmahuej .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#satdmahuej .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#satdmahuej .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#satdmahuej .gt_from_md > :first-child {
  margin-top: 0;
}

#satdmahuej .gt_from_md > :last-child {
  margin-bottom: 0;
}

#satdmahuej .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#satdmahuej .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#satdmahuej .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#satdmahuej .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#satdmahuej .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#satdmahuej .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#satdmahuej .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#satdmahuej .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#satdmahuej .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#satdmahuej .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#satdmahuej .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#satdmahuej .gt_left {
  text-align: left;
}

#satdmahuej .gt_center {
  text-align: center;
}

#satdmahuej .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#satdmahuej .gt_font_normal {
  font-weight: normal;
}

#satdmahuej .gt_font_bold {
  font-weight: bold;
}

#satdmahuej .gt_font_italic {
  font-style: italic;
}

#satdmahuej .gt_super {
  font-size: 65%;
}

#satdmahuej .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="satdmahuej" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">term</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">estimate</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">conf.low</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">conf.high</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_left">(Intercept)</td>
      <td class="gt_row gt_right">-1.6229</td>
      <td class="gt_row gt_right">-1.9162</td>
      <td class="gt_row gt_right">-1.3332</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceBlack</td>
      <td class="gt_row gt_right">0.5495</td>
      <td class="gt_row gt_right">0.1917</td>
      <td class="gt_row gt_right">0.9091</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceHispanic</td>
      <td class="gt_row gt_right">0.0504</td>
      <td class="gt_row gt_right">-0.2906</td>
      <td class="gt_row gt_right">0.3937</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceMiddle Eastern</td>
      <td class="gt_row gt_right">0.5896</td>
      <td class="gt_row gt_right">-0.4089</td>
      <td class="gt_row gt_right">1.5611</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceMixed</td>
      <td class="gt_row gt_right">-0.1621</td>
      <td class="gt_row gt_right">-0.5914</td>
      <td class="gt_row gt_right">0.2656</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceNative American</td>
      <td class="gt_row gt_right">0.2537</td>
      <td class="gt_row gt_right">-0.4247</td>
      <td class="gt_row gt_right">0.9190</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceOther</td>
      <td class="gt_row gt_right">0.9055</td>
      <td class="gt_row gt_right">0.2806</td>
      <td class="gt_row gt_right">1.5259</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceWhite</td>
      <td class="gt_row gt_right">0.7922</td>
      <td class="gt_row gt_right">0.4971</td>
      <td class="gt_row gt_right">1.0909</td>
    </tr>
<tr>
<td class="gt_row gt_left">age</td>
      <td class="gt_row gt_right">0.0212</td>
      <td class="gt_row gt_right">0.0136</td>
      <td class="gt_row gt_right">0.0288</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceBlack:age</td>
      <td class="gt_row gt_right">-0.0357</td>
      <td class="gt_row gt_right">-0.0447</td>
      <td class="gt_row gt_right">-0.0267</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceHispanic:age</td>
      <td class="gt_row gt_right">-0.0030</td>
      <td class="gt_row gt_right">-0.0117</td>
      <td class="gt_row gt_right">0.0057</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceMiddle Eastern:age</td>
      <td class="gt_row gt_right">-0.0149</td>
      <td class="gt_row gt_right">-0.0391</td>
      <td class="gt_row gt_right">0.0087</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceMixed:age</td>
      <td class="gt_row gt_right">0.0018</td>
      <td class="gt_row gt_right">-0.0086</td>
      <td class="gt_row gt_right">0.0121</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceNative American:age</td>
      <td class="gt_row gt_right">0.0110</td>
      <td class="gt_row gt_right">-0.0034</td>
      <td class="gt_row gt_right">0.0257</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceOther:age</td>
      <td class="gt_row gt_right">-0.0016</td>
      <td class="gt_row gt_right">-0.0142</td>
      <td class="gt_row gt_right">0.0112</td>
    </tr>
<tr>
<td class="gt_row gt_left">raceWhite:age</td>
      <td class="gt_row gt_right">-0.0051</td>
      <td class="gt_row gt_right">-0.0128</td>
      <td class="gt_row gt_right">0.0026</td>
    </tr>
</tbody>
</table></div>
<p>As you can see, this generates the same results as when we used <code>glm()</code> directly. Now we can see how the effect of <code>age</code> varies by <code>race</code>. Looking at predicted probabilities of these numbers can put this model in perspective. Let’s use <code>augment()</code> to generate the predictions. Remember that <code>type.predict = "response"</code> and <code>type.residuals = "deviance"</code> put the fitted values and the residuals on the probability scale.</p>
<!-- MB: This doesn't work, yoou need to find a way to do it in tidymodels. It is a dataframe not a model -->
<div class="sourceCode" id="cb916"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb916-1"><a href="discrete-response.html#cb916-1"></a>interact_model &lt;-<span class="st"> </span>logistic_fit<span class="op">$</span>fit <span class="op">%&gt;%</span></span>
<span id="cb916-2"><a href="discrete-response.html#cb916-2"></a><span class="st">  </span><span class="kw">tidy</span>(<span class="dt">conf.int =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb916-3"><a href="discrete-response.html#cb916-3"></a><span class="st">  </span><span class="kw">select</span>(term, estimate, conf.low, conf.high)</span>
<span id="cb916-4"><a href="discrete-response.html#cb916-4"></a></span>
<span id="cb916-5"><a href="discrete-response.html#cb916-5"></a><span class="co"># regression_points &lt;- interact_model %&gt;%</span></span>
<span id="cb916-6"><a href="discrete-response.html#cb916-6"></a><span class="co">#   augment(type.predict = "response",</span></span>
<span id="cb916-7"><a href="discrete-response.html#cb916-7"></a><span class="co">#           type.residuals = "deviance") %&gt;%</span></span>
<span id="cb916-8"><a href="discrete-response.html#cb916-8"></a><span class="co">#   mutate(conf.low = .fitted - 2 * .cooksd,</span></span>
<span id="cb916-9"><a href="discrete-response.html#cb916-9"></a><span class="co">#          conf.high = .fitted + 2 * .cooksd) %&gt;%</span></span>
<span id="cb916-10"><a href="discrete-response.html#cb916-10"></a><span class="co">#   select(approval, race, age, .fitted, conf.low, conf.high, .resid)</span></span>
<span id="cb916-11"><a href="discrete-response.html#cb916-11"></a><span class="co"># regression_points</span></span></code></pre></div>
</div>
</div>
<div id="classification-and-regression-trees-cart" class="section level2">
<h2>
<span class="header-section-number">11.3</span> Classification and regression trees (CART)</h2>
<div id="what-is-cart" class="section level3">
<h3>
<span class="header-section-number">11.3.1</span> What is CART?</h3>
<p>We have learned how to fit models for binary responses using logistic regression. However, logistic regression is just one of many methods we can use to model binary responses. CART is another approach, which we’ll learn about in this section. In the next section, we’ll learn about random forests.</p>
<!-- Validity/model fitting the world. bias/variance  overfitting/underfitting. goal of the model -->
<p>A <strong>tree</strong> is basically a flow chart of yes or no questions. The general idea of the methods we are describing is to define an algorithm that uses data to create these trees with predictions at the ends, referred to as <em>nodes</em>. Decision trees predict an outcome variable <span class="math inline">\(Y\)</span> by <em>partitioning</em> the predictors.</p>
<p>Decision trees like this are often used in practice. For example, to decide on a person’s risk of poor outcome after having a heart attack, doctors use the following:</p>
<p>(Source: Walton 2010 Informal Logic, Vol. 30, No. 2, pp. 159-184<label for="tufte-sn-16" class="margin-toggle sidenote-number">16</label><input type="checkbox" id="tufte-sn-16" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">16</span> <a href="https://papers.ssrn.com/sol3/Delivery.cfm/SSRN_ID1759289_code1486039.pdf?abstractid=1759289&amp;mirid=1&amp;type=2" class="uri">https://papers.ssrn.com/sol3/Delivery.cfm/SSRN_ID1759289_code1486039.pdf?abstractid=1759289&amp;mirid=1&amp;type=2</a></span>.)</p>
<p>Here, the binary outcome is whether a patient is “High Risk” or “Low Risk.” We have three predictors: minimum systolic blood pressure over the initial 24-hour period, age, and presence of sinus tachycardia. The tree presents a series of yes or no questions that allow us to use the predictors to classify a patient’s risk level.</p>
<p><strong>Classification trees</strong>, or decision trees, are used in prediction problems where the outcome is categorical. (When the outcome is numerical, they are called <strong>regression trees</strong>; hence the acronym <strong>CART</strong>, standing for Classification and Regression Trees.) The general idea here is to build a decision tree and, at the end of each <em>node</em>, obtain a predictor <span class="math inline">\(\hat{y}\)</span>. A mathematical way to describe this is to say that we are partitioning the <em>predictor space</em> into <span class="math inline">\(J\)</span> non-overlapping regions, <span class="math inline">\(R_1, R_2, \ldots, R_J\)</span>, and then for any predictor <span class="math inline">\(x\)</span> that falls within region <span class="math inline">\(R_j\)</span>, we estimate <span class="math inline">\(f(x)\)</span> with the class that is the most common among the data within the partition for which the associated predictor <span class="math inline">\(x_i\)</span> is also in <span class="math inline">\(R_j\)</span>.</p>
<p>But how do we decide on which partitions to make (<span class="math inline">\(R_1, R_2, \ldots, R_J\)</span>) and how do we choose <span class="math inline">\(J\)</span>, the total number of partitions? Here is where the algorithm gets a bit complicated.</p>
<p>Classification trees create partitions recursively. We start the algorithm with one partition, the entire predictor space (i.e., every observation is classified as 0 or 1). But after the first step we will have two partitions. After the second step we will split one of these partitions into two and will have three partitions, then four, then five, and so on. (We will describe how we decide when to stop later.)</p>
<p>Once we select a partition <span class="math inline">\(\mathbf{x}\)</span> to split in order to create the new partitions, we find a predictor <span class="math inline">\(j\)</span> and value <span class="math inline">\(s\)</span> that define two new partitions, which we will call <span class="math inline">\(R_1(j,s)\)</span> and <span class="math inline">\(R_2(j,s)\)</span>, that split our observations in the current partition by asking if <span class="math inline">\(x_j\)</span> is bigger than <span class="math inline">\(s\)</span> (or if <span class="math inline">\(x_j\)</span> falls into a particular category <span class="math inline">\(s\)</span>, if the predictor <span class="math inline">\(j\)</span> is categorical):</p>
<p><span class="math display">\[
R_1(j,s) = \{\mathbf{x} \mid x_j &lt; s\} \mbox{  and  } R_2(j,s) = \{\mathbf{x} \mid x_j \geq s\}
\]</span></p>
<p>Now, after we define the new partitions <span class="math inline">\(R_1\)</span> and <span class="math inline">\(R_2\)</span>, and we decide to stop the partitioning process, we compute predictors by taking the most common category of all the observations <span class="math inline">\(y\)</span> for which the associated <span class="math inline">\(\mathbf{x}\)</span> is in <span class="math inline">\(R_1\)</span> and <span class="math inline">\(R_2\)</span>. We refer to these two as <span class="math inline">\(\hat{y}_{R_1}\)</span> and <span class="math inline">\(\hat{y}_{R_2}\)</span> respectively.</p>
<p>But how do we pick the predictor <span class="math inline">\(j\)</span> and the value <span class="math inline">\(s\)</span>? One of the more popular ways for categorical data is the <em>Gini Index</em>.</p>
<p>In a perfect scenario, the outcomes in each of our partitions are all of the same category since this will permit perfect accuracy. The <em>Gini Index</em> is going to be 0 in this scenario, and become larger the more we deviate from this scenario. To define the Gini Index, we define <span class="math inline">\(\hat{p}_{j,k}\)</span> as the proportion of observations in partition <span class="math inline">\(j\)</span> that are of class <span class="math inline">\(k\)</span>. The Gini Index is defined as</p>
<p><span class="math display">\[
\mbox{Gini}(j) = \sum_{k=1}^K \hat{p}_{j,k}(1-\hat{p}_{j,k})
\]</span></p>
<p>If you study the formula carefully you will see that it is in fact 0 in the perfect scenario described above, since <span class="math inline">\(\hat{p}_{j,k}(1-\hat{p}_{j,k}) = 0\)</span> for all <span class="math inline">\(k\)</span>.</p>
<p>Once we are done partitioning the predictor space into regions, in each region a prediction is made using the observations in that region.</p>
<p>But when do we stop partitioning? Every time we split and define two new partitions, the Gini Index improves. This is because with more partitions, our model has more flexibility to adapt to our data. However, our model may therefore perform worse when exposed to new data (this problem is called <em>overfitting</em>). This connects to our discussion of validity and models, as the conditions used to create the model will be too specific to accurately extrapolate to new data points. To avoid this, the algorithm sets a minimum for how much the Gini Index must improve for another partition to be added. This parameter is referred to as the <em>complexity parameter</em> (<span class="math inline">\(c_p\)</span>). The measure of fit must improve by a factor of <span class="math inline">\(c_p\)</span> for the new partition to be added. Large values of <span class="math inline">\(c_p\)</span> will therefore force the algorithm to stop earlier which results in fewer nodes.</p>
<!-- MB: Use overfitting to discuss validity/model fitting the world-->
<p>Classification trees have certain advantages that make them very useful. They are highly interpretable, even more so than linear models. They are easy to visualize (if small enough). Finally, they can model human decision processes. However, in terms of accuracy, they are rarely the best performing method since they are not very flexible. Random forests, explained in the next section, improve on some of the shortcomings of classification trees.</p>
</div>
<div id="one-categorical-explanatory-variable-1" class="section level3">
<h3>
<span class="header-section-number">11.3.2</span> One categorical explanatory variable</h3>
<p>To create classification trees, we’ll use the <code>decision_tree()</code> model specification and the <code>"rpart"</code> engine. The syntax is very similar to when we used <code>logistic_reg()</code>. Note that our binary response variable has to be a factor, just like with <code>logistic_reg()</code>.</p>
<div class="sourceCode" id="cb917"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb917-1"><a href="discrete-response.html#cb917-1"></a><span class="kw">library</span>(parsnip)</span>
<span id="cb917-2"><a href="discrete-response.html#cb917-2"></a>tree_mod &lt;-<span class="st"> </span><span class="kw">decision_tree</span>() <span class="op">%&gt;%</span></span>
<span id="cb917-3"><a href="discrete-response.html#cb917-3"></a><span class="st">  </span><span class="kw">set_engine</span>(<span class="st">"rpart"</span>,</span>
<span id="cb917-4"><a href="discrete-response.html#cb917-4"></a>             <span class="dt">model =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></span>
<span id="cb917-5"><a href="discrete-response.html#cb917-5"></a><span class="st">  </span><span class="kw">set_mode</span>(<span class="st">"classification"</span>)</span></code></pre></div>
<p>(Note that we added the argument <code>model = TRUE</code> to <code>set_engine()</code>. This saves the model frame, which we will need to avoid a warning when we plot the trees later.)</p>
<p>The function <code>set_mode()</code> wasn’t necessary when we did logistic regression. Here it clarifies that we want a <em>classification</em> tree rather than a <em>regression</em> tree.</p>
<p>Now that we have the object <code>tree_mod</code>, we can use <code>fit()</code> in the <strong>parsnip</strong> package. We’ll start by predicting <code>approval</code> with <code>region</code>:</p>
<div class="sourceCode" id="cb918"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb918-1"><a href="discrete-response.html#cb918-1"></a>race_tree &lt;-<span class="st"> </span><span class="kw">fit</span>(tree_mod,</span>
<span id="cb918-2"><a href="discrete-response.html#cb918-2"></a>                         <span class="kw">factor</span>(approval) <span class="op">~</span><span class="st"> </span>race, </span>
<span id="cb918-3"><a href="discrete-response.html#cb918-3"></a>                         <span class="dt">data =</span> cces_ch12)</span></code></pre></div>
<p>See how when using <strong>tidymodels</strong>, this is exactly the same as how we would fit a logistic regression, but with our model specification saved in <code>tree_mod</code> rather than the model specification we saved in <code>logistic_fit</code>.</p>
<p>What was the result of our tree?</p>
<div class="sourceCode" id="cb919"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb919-1"><a href="discrete-response.html#cb919-1"></a>race_tree</span></code></pre></div>
<pre><code>## parsnip model object
## 
## Fit time:  86ms 
## n=59967 (33 observations deleted due to missingness)
## 
## node), split, n, loss, yval, (yprob)
##       * denotes terminal node
## 
## 1) root 59967 26000 0 (0.56 0.44) *</code></pre>
<p>It’s not especially helpful to look at the results of a tree as text. In order to visualize the tree, we’ll use the <code>prp()</code> function in the <strong>rpart.plot</strong> package. Remember that the model object is stored in <code>race_tree$fit</code>.</p>
<div class="sourceCode" id="cb921"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb921-1"><a href="discrete-response.html#cb921-1"></a><span class="kw">library</span>(rpart.plot)</span>
<span id="cb921-2"><a href="discrete-response.html#cb921-2"></a></span>
<span id="cb921-3"><a href="discrete-response.html#cb921-3"></a>race_tree<span class="op">$</span>fit <span class="op">%&gt;%</span></span>
<span id="cb921-4"><a href="discrete-response.html#cb921-4"></a><span class="st">  </span><span class="kw">prp</span>(<span class="dt">extra =</span> <span class="dv">6</span>, <span class="dt">varlen =</span> <span class="dv">0</span>, <span class="dt">faclen =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="book_temp_files/figure-html/unnamed-chunk-736-1.png" width="672"></p>
<p>The arguments <code>varlen = 0</code> and <code>faclen = 0</code> ensure that the full variable names and factor levels are printed. The argument <code>extra = 6</code> shows the proportion of “yes” outcomes within a given partition. Since we’ll be using these same arguments throughout the chapter, we’ll create a new function that calls <code>prp()</code> but with these options as defaults:</p>
<div class="sourceCode" id="cb922"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb922-1"><a href="discrete-response.html#cb922-1"></a>prp_ch13 &lt;-<span class="st"> </span><span class="cf">function</span>(x, ...) <span class="kw">prp</span>(x, <span class="dt">extra =</span> <span class="dv">6</span>, <span class="dt">varlen =</span> <span class="dv">0</span>, <span class="dt">faclen =</span> <span class="dv">0</span>, ...)</span>
<span id="cb922-2"><a href="discrete-response.html#cb922-2"></a></span>
<span id="cb922-3"><a href="discrete-response.html#cb922-3"></a>race_tree<span class="op">$</span>fit <span class="op">%&gt;%</span></span>
<span id="cb922-4"><a href="discrete-response.html#cb922-4"></a><span class="st">  </span><span class="kw">prp_ch13</span>()</span></code></pre></div>
<p><img src="book_temp_files/figure-html/unnamed-chunk-737-1.png" width="672"></p>
<!--   ^^^^ NEW WORK    vvvv OLD WORK  -->

</div>
</div>
</div></body></html>

<p style="text-align: center;">
<a href="continuous-response.html"><button class="btn btn-default">Previous</button></a>
<a href="appendices.html"><button class="btn btn-default">Next</button></a>
</p>
<p class="build-date">Page built: 
2020-07-28
</p>
</div>
</div>



</body>
</html>
